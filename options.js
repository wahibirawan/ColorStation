import{D as p}from"./chunks/constants.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))f(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&f(i)}).observe(document,{childList:!0,subtree:!0});function y(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function f(e){if(e.ep)return;e.ep=!0;const t=y(e);fetch(e.href,t)}})();const c=document.getElementById("default-format"),a=document.getElementById("default-sampling"),d=document.getElementById("show-grid"),l=document.getElementById("prefer-native"),m=document.getElementById("save-state");let n={...p},s=null;const g=async o=>{const r=await chrome.runtime.sendMessage(o);if(!r?.ok)throw new Error(r?.error||"Request failed.");return r},u=o=>{m.textContent=o,s!==null&&window.clearTimeout(s),s=window.setTimeout(()=>{m.textContent="",s=null},1400)},h=()=>{c.value=n.defaultFormat,a.value=String(n.defaultSamplingSize),d.checked=n.showGrid,l.checked=n.preferNativeEyeDropper},v=async()=>{const o={defaultFormat:c.value,defaultSamplingSize:Number.parseInt(a.value,10),showGrid:d.checked,preferNativeEyeDropper:l.checked};n=(await g({type:"UPDATE_SETTINGS",payload:o})).settings,h(),u("Saved")},E=()=>{[c,a,d,l].forEach(o=>{o.addEventListener("change",()=>{v().catch(()=>{u("Failed to save")})})})},S=async()=>{E();const o=await g({type:"GET_STATE"});n={...p,...o.settings},h()};S().catch(()=>{u("Failed to load options")});
